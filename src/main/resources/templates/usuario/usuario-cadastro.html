<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="layout/layoutPadrao">
<head>

<title>Cadastro de Operador</title>
</head>

<section layout:fragment="conteudo">

	<div class="row">
		<div class="col-lg-10 col-lg-offset-1 col-sm-12">
			<ol class="breadcrumb">
				<li><a th:href="@{/index}">Dashboard</a></li>
				<li class="active">Usuários</li>
				<li class="active">Cadastrar</li>
			</ol>
			<div class="panel panel-default">
				<div class="panel-heading">
					<div class="row">
						<div class="col-lg-1">
							<!-- <i class="fa fa-support fa-5x"></i> -->
							<img class="imagem_acao" th:src="@{/imagens/ic_operador.png}" />
						</div>
						<div class="col-lg-6">
							<h3 class="page-header">
								Usuários <small>Cadastrar usuário</small>
							</h3>
						</div>
					</div>
				</div>

				<div class="panel-body">

					<form class="form-horizontal" method="POST"
						enctype="multipart/form-data" th:action="@{/usuarios}"
						th:object="${usuario}" autocomplete="off">

						<input type="hidden" th:field="*{id}" /> 
						<input type="hidden"
							th:field="*{dataCadastro}" />

						<div layout:include="layout/mensagem-erro"></div>
						<div layout:include="layout/mensagem-geral"></div>

						<div class="row">
							<div class="col-md-10 text-center">
								<div class="form-group"
									th:classappend="${#fields.hasErrors('nome')} ? has-error">
									<label for="nome" class="col-lg-3 control-label">Nome</label>
									<div class="col-lg-9">
										<input type="text" class="form-control" id="nome"
											th:field="*{nome}" autofocus="autofocus"
											placeholder="Nome do Operador" 
											autocomplete="off"/>
									</div>
								</div>
								<div class="form-group"
									th:classappend="${#fields.hasErrors('sobrenome')} ? has-error">
									<label for="nome" class="col-lg-3 control-label">
										Sobrenome</label>
									<div class="col-lg-9">
										<input type="text" class="form-control" id="sobrenome"
											th:field="*{sobrenome}" autofocus="autofocus"
											placeholder="Sobrenome do Operador" 
											autocomplete="off"/>
									</div>
								</div>
								<div class="form-group"
									th:classappend="${#fields.hasErrors('codigo')} ? has-error">
									<label for="codigo" class="col-lg-3 control-label">Código</label>
									<div class="col-lg-9">
										<input type="text" class="form-control" id="codigo"
											th:field="*{codigo}" placeholder="Codigo do Operador" autocomplete="off"/>
									</div>
								</div>
								<div class="form-group"
									th:classappend="${#fields.hasErrors('username')} ? has-error">
									<label for="username" class="col-lg-3 control-label">Nome
										de usuário</label>
									<div class="col-lg-9">
										<input type="text" class="form-control" id="username"
											th:field="*{username}" placeholder="Username" autocomplete="off"/>
									</div>
								</div>
								<div class="form-group">
									<label for="enabled" class="col-sm-3 control-label">Status</label>
									<div class="col-sm-2">
										<label class="radio-inline">
										  <input type="radio" name="enabled" value="true" th:field="*{enabled}"/>Ativo
										</label>
										<label class="radio-inline">
										  <input type="radio" name="enabled" value="false" th:field="*{enabled}"/>Inativo
										</label>
									</div>
								</div>
															
								
								<div class="form-group"
									th:classappend="${#fields.hasErrors('password')} ? has-error">
									<label for="password" class="col-lg-3 control-label">Password</label>
									<div class="col-lg-9">
										<input type="password" class="form-control" id="password"
											th:field="*{password}" placeholder="Senha" autocomplete="off"/>
									</div>
								</div>
								
																<!-- Lista Roles -->
		<div class="panel panel-default panel-primary">
			<div class="panel-heading">
				<div class="clearfix">
					<h1 class="panel-title pde-detalhe-panel">Autorizações</h1>
					<a class="btn btn-link pde-link-panel-detalhe" data-toggle="modal"
						data-target="#addPerfilModal"
						>Adicionar Perfil</a>
				</div>
			</div>

			<div class="table-responsive">
				<table class="table table-bordered table-striped">
					<thead>
						<th class="text-center col-md-1">#</th>
						<th class="text-center col-md-2">Perfil</th>
						<th class="text-center col-md-2">Ação</th>
					</thead>

					<tbody>
						<tr th:each="perfil : ${usuario.permissoes}">
							<td class="text-center" th:text="${perfil.id}"></td>
							<td class="text-center" th:text="${perfil.nome}"></td>

							<td class="text-center"><a class="btn btn-link btn-xs"
								th:href="@{/perfil/excluir/{id}(id=${perfil.id})}"
								title="Excluir" rel="tooltip" data-placement="top"> <span
									class="glyphicon glyphicon-remove"></span>
							</a></td>
						</tr>

						<tr>
							<td th:if="${#lists.isEmpty(usuario.permissoes)}" class="text-center"
								colspan="12">Nenhum Perfil cadastrado</td>
						</tr>

					</tbody>
				</table>
			</div>

		</div>
		
				<!-- Modal adicionar Perfil -->
		<!-- Modal -->
		<div class="modal fade" id="addPerfilModal" tabindex="-1"
			role="dialog" aria-labelledby="myModalLabel">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<h4 class="modal-title" id="myModalLabel">Adicionar Perfil</h4>
					</div>
					<div class="modal-body">

						<form method="POST" th:action="@{/usuarios/adc-perfil}"
							th:object="${usuario}">

							<div class="panel panel-default">


								<div class="panel-body">

									<input type="hidden"  /> <input type="hidden"
										
 />

									<div class="row">

										<div class="form-group col-sm-10">
											<label for="operadora">Perfil</label>
											 <select
												class="form-control" name="perfil" >
 												 <option value="ROLE_ADMIN">ADMIN</option>
 												 <option value="ROLE_USER">USER</option>

											</select>
										</div>


									</div>


									<hr />

									<div class="form-group">
										<div>
											<button type="submit" class="btn btn-primary">Salvar</button>
										</div>
									</div>

								</div>
							</div>
						</form>


					</div>

				</div>
			</div>
		</div>

								<div class="form-group">
									<div class="col-lg-6 col-lg-offset-3">
										<button  type="submit" class="btn btn-success col-lg-4"><i class="fa fa-floppy-o" aria-hidden="true"></i> SALVAR</button>
										<a th:href="@{/usuarios}" class="btn btn-default col-lg-4 col-lg-offset-1 ">CANCELAR</a>
										
									</div>
								</div>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>

</section>

</html>